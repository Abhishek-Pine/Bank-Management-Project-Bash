#!/bin/bash
e=1

while [ $e -eq 1 ]
do
	clear
	echo -en "\n\t Customer Menu\n\n1. View Details\n2. Transaction \n3. Edit \n4. Logout \n\nEnter Your Choice : "
	read s
	case $s in
		1)
			./custview $1
			;;
		2)
			./trans $1
			;;
		3)
			clear
			echo -e "\n\tEdit Menu \n"
			echo -en "Enter OTP (Which is send to your registered Email ID ) : " 
			otp=$RANDOM
			echo -en "As you requested  for OTP for Edit Menu.\nYour OTP : $otp.\nKindly Do Not Share OTP with anyone.\n\nFor Further Enquires ,Please Visit Branch\nThank-you For Choosing Our Bank\n\n\n*****This Mail is Automatically Generated *****" | mail -s "Edit Menu OTP" $(head -n 8 $1 | tail -n +8 ) 
			read answer
			if [ $otp -eq $answer ] ;
			then
				./custedit $1
			
			else
				echo -e "\nWrong OTP!!! Login Again " 
				echo -e "\nPress Any Key To Continue " 
				read gap
				e=2
			fi
			;;		
		4)
			e=2
			;;
		*)
			echo -e "\nOops!! Invalid Input\n\nPress Any Key To Continue " 
			read gap
			;;

	esac
done
